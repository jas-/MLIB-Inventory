<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mariott Library Inventory Management</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- CSS enabling mobile frome work (jQuery Mobile) -->
		<link rel="stylesheet"  href="css/themes/default/jquery.mobile-1.2.0.css" />
		<link rel="stylesheet"  href="css/themes/custom/custom.min.css" />

		<!-- jQuery libraries -->
		<script src="js/jquery.js"></script>
		<script src="js/jquery.mobile-1.2.0.min.js"></script>

  </head>

<body>

<div data-role="page" id="main">

	<!-- Header -->
	<div data-theme="c" data-role="header">
		<h3>
			<span align="left"><a href=""><img src="images/inventory_categories.png" alt="Inventory Management" title="Inventory Management" height="56" /></a><a href="http://www.utah.edu/"><img src="images/marriottHeader-U.gif" alt="The University of Utah" title="The University of Utah" /></a><a href="index.php"><img src="images/marriottHeader-title.gif" alt="J. Willard Marriott Library, The University of Utah" title="J. Willard Marriott Library, The University of Utah" /></a></span>
		</h3>

		<div data-role="collapsible-set" data-theme="c" data-content-theme="c">

			<!-- Current inventory (remote) -->
			<div data-role="collapsible">
				<h3>
					Current Inventory
				</h3>
				<div class="ui-grid-d">
		      <div class="ui-block-a">
						Hostname
		      </div>
		      <div class="ui-block-b">
						SKU
		      </div>
		      <div class="ui-block-c">
						UUIC
		      </div>
		      <div class="ui-block-d">
						Serial
		      </div>
		      <div class="ui-block-e">
						Monitor SKU
		      </div>
		      <div class="ui-block-f">
						Monitor Serial
		      </div>
					<div id="current-inventory">

					</div>
		    </div>
			</div>

			<!-- Search inventory -->
			<div data-role="collapsible">
				<h3>
					Search Inventory
				</h3>
				<div data-role="content">
					<form action="?do=search" id="search-computer">
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup" data-mini="true" method="post">
								<label for="search-computers">
									Search computers
								</label>
								<input name="search-computers" placeholder="Search computers" value="" type="search">
							</fieldset>
						</div>
					</form>
					<form action="?do=search-monitors" id="search-monitors" method="post">
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup" data-mini="true">
								<label for="search-monitors">
									Search monitors
								</label>
								<input name="search-monitors" placeholder="Search monitors" value="" type="search">
							</fieldset>
						</div>
					</form>
				</div>
			</div>

			<!-- Manage inventory -->
			<div data-role="collapsible">
				<h3>
					Add / Edit / Delete Inventory
				</h3>
				<div data-role="content">
					<form action="?do=add" id="add-computer" name="add-computer" method="post">
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup" data-mini=true>
								<label for="hostname">
									Hostname
								</label>
								<input id="hostname" name="hostname" placeholder="Computer name" type="text">
							</fieldset>
						</div>
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup" data-mini=true>
								<label for="sku">
									SKU
								</label>
								<input id="sku" name="sku" placeholder="SKU (white barcode)" type="text">
							</fieldset>
						</div>
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup" data-mini=true>
								<label for="uuic">
									UUIC
								</label>
								<input id="uuic" name="uuic" placeholder="UUIC (yellow sticker)" type="text">
							</fieldset>
						</div>
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup" data-mini=true>
								<label for="serial">
									Serial
								</label>
								<input id="serial" name="serial" placeholder="Serial (Red label)" type="text">
							</fieldset>
						</div>
						<input data-theme="c" data-icon="arrow-r" data-iconpos="right" value="Submit" type="submit">
					</form>
				</div>
			</div>

			<!-- Manually force update -->
			<div data-role="collapsible">
				<h3>
					Update changes
				</h3>
			</div>
		</div>
		<div style="text-align: center; padding-bottom: 1%">
			<span style="font-size: .7em;font-weight: normal">
				&copy; University Of Utah - Marriott Library 2013
			</span>
		</div>
	</div>
</div>

<!-- jQuery.offline for storage, pulling & pushing data -->
<script src="js/jquery.offline.js"></script>

<script>
  var $j = jQuery.noConflict();
  $j(document).ready(function(){

		/* Load offline handler */
		$j('#current-inventory').offline({
			appID:'MLIB-Inventory',
			url: 'http://new-inventory.scl.utah.edu/?do=current',
			debug: true,
			callback: function(){_table(this, '#current-inventory');}
		});

		/* Create a table of data */
		function _table(o, e){
			$j.each(o, function(x, y){
				if ((/object|array/.test(typeof(y))) && (_size(y) > 0)){
					//_table(o, y);
					$j(e).append(x);
				} else {
					$j(e).html(y);
				}
			});
		}

		function _size(obj){
			var n = 0;
			if (/object/.test(typeof(obj))) {
				$j.each(obj, function(k, v){
					if (obj.hasOwnProperty(k)) n++;
				});
			} else if (/array/.test(typeof(obj))) {
				n = obj.length;
			}
			return n;
		}
	});
</script>
</body>
